[gd_scene load_steps=23 format=4 uid="uid://d1q7xp11tjvtf"]

[ext_resource type="Script" path="res://scripts/main.gd" id="1_7tdli"]
[ext_resource type="Shader" path="res://shaders/distorsio.gdshader" id="1_68mvh"]
[ext_resource type="PackedScene" uid="uid://c3cpiois8vxd3" path="res://scenes/Characters/slime.tscn" id="1_lkb1x"]
[ext_resource type="Script" path="res://scripts/tower.gd" id="1_ufjuo"]
[ext_resource type="Texture2D" uid="uid://jyt6p5subqwj" path="res://assets/BackGround/skyBackground.png" id="2_68mvh"]
[ext_resource type="Texture2D" uid="uid://cuwr7ff4m3m7x" path="res://assets/BackGround/clouds.png" id="5_rgnqb"]
[ext_resource type="Texture2D" uid="uid://beafma5jlu5bo" path="res://assets/BackGround/wallBackground.png" id="6_ohqnk"]
[ext_resource type="PackedScene" uid="uid://dmqlieh7sp357" path="res://scenes/Characters/wheel.tscn" id="6_shiux"]
[ext_resource type="Shader" path="res://shaders/ocultacio.gdshader" id="7_ahqv4"]
[ext_resource type="TileSet" uid="uid://yokwokmd1xk5" path="res://towerTileSet.tres" id="7_orpcr"]
[ext_resource type="Shader" path="res://shaders/paletteSwap.gdshader" id="11_swa86"]
[ext_resource type="Texture2D" uid="uid://1erkmbnbkls6" path="res://shaders/palette_default.png" id="12_8ytc2"]
[ext_resource type="Texture2D" uid="uid://lrvcar35b3lb" path="res://shaders/palette_blue.png" id="13_vleef"]
[ext_resource type="PackedScene" path="res://scenes/presure_plate.tscn" id="14_1gjkc"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_843tt"]
shader = ExtResource("11_swa86")
shader_parameter/num_colors = 5
shader_parameter/precision = 0.01

[sub_resource type="ShaderMaterial" id="ShaderMaterial_7e70y"]
shader = ExtResource("7_ahqv4")
shader_parameter/ScreenWidth = null
shader_parameter/RealScreenWidth = null

[sub_resource type="ShaderMaterial" id="ShaderMaterial_qf5j0"]
shader = ExtResource("11_swa86")
shader_parameter/num_colors = 5
shader_parameter/precision = 0.01

[sub_resource type="ShaderMaterial" id="ShaderMaterial_m5ks1"]
shader = ExtResource("11_swa86")
shader_parameter/num_colors = 5
shader_parameter/precision = 0.01

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ldumb"]
shader = ExtResource("11_swa86")
shader_parameter/num_colors = 5
shader_parameter/precision = 0.01

[sub_resource type="ShaderMaterial" id="ShaderMaterial_6cm36"]
shader = ExtResource("1_68mvh")
shader_parameter/strength = 0.5

[sub_resource type="ViewportTexture" id="ViewportTexture_gbuvm"]
viewport_path = NodePath("Tower/Scene/TowerViewport")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_kmh7i"]
shader = ExtResource("11_swa86")
shader_parameter/num_colors = 5
shader_parameter/precision = 0.01
shader_parameter/palette_in = ExtResource("12_8ytc2")
shader_parameter/palette_out = ExtResource("13_vleef")

[node name="Main" type="Node2D"]
material = SubResource("ShaderMaterial_843tt")
script = ExtResource("1_7tdli")
metadata/_edit_vertical_guides_ = [12.0, 76.0]

[node name="Tower" type="Node2D" parent="."]
material = SubResource("ShaderMaterial_7e70y")
use_parent_material = true
script = ExtResource("1_ufjuo")

[node name="Scene" type="Node2D" parent="Tower"]

[node name="SkyParallax" type="ParallaxBackground" parent="Tower/Scene"]

[node name="SkyBackground" type="Sprite2D" parent="Tower/Scene/SkyParallax"]
material = SubResource("ShaderMaterial_qf5j0")
position = Vector2(44, 60)
texture = ExtResource("2_68mvh")

[node name="ParallaxLayer" type="ParallaxLayer" parent="Tower/Scene/SkyParallax"]
material = SubResource("ShaderMaterial_m5ks1")
motion_scale = Vector2(2, 1)

[node name="Clouds" type="Sprite2D" parent="Tower/Scene/SkyParallax/ParallaxLayer"]
use_parent_material = true
position = Vector2(8, 60)
texture = ExtResource("5_rgnqb")

[node name="ParallaxLayer2" type="ParallaxLayer" parent="Tower/Scene/SkyParallax"]
material = SubResource("ShaderMaterial_m5ks1")
motion_scale = Vector2(2, 1)

[node name="Clouds" type="Sprite2D" parent="Tower/Scene/SkyParallax/ParallaxLayer2"]
use_parent_material = true
position = Vector2(102, 103)
texture = ExtResource("5_rgnqb")

[node name="ParallaxLayer3" type="ParallaxLayer" parent="Tower/Scene/SkyParallax"]
material = SubResource("ShaderMaterial_m5ks1")
motion_scale = Vector2(2, 1)

[node name="Clouds" type="Sprite2D" parent="Tower/Scene/SkyParallax/ParallaxLayer3"]
use_parent_material = true
position = Vector2(-22, 93)
texture = ExtResource("5_rgnqb")

[node name="ParallaxLayer4" type="ParallaxLayer" parent="Tower/Scene/SkyParallax"]
material = SubResource("ShaderMaterial_m5ks1")
motion_scale = Vector2(2, 1)

[node name="Clouds" type="Sprite2D" parent="Tower/Scene/SkyParallax/ParallaxLayer4"]
use_parent_material = true
position = Vector2(115, 35)
texture = ExtResource("5_rgnqb")

[node name="TowerViewport" type="SubViewport" parent="Tower/Scene"]
snap_2d_transforms_to_pixel = true
size = Vector2i(88, 120)

[node name="WallBackground" type="Sprite2D" parent="Tower/Scene/TowerViewport"]
material = SubResource("ShaderMaterial_ldumb")
texture = ExtResource("6_ohqnk")
offset = Vector2(44, 60)

[node name="TowerSprites" type="Node2D" parent="Tower/Scene"]
material = SubResource("ShaderMaterial_6cm36")
position = Vector2(44, 0)

[node name="TowerSprite1" type="Sprite2D" parent="Tower/Scene/TowerSprites"]
use_parent_material = true
position = Vector2(0, 60)
texture = SubResource("ViewportTexture_gbuvm")

[node name="TowerSprite2" type="Sprite2D" parent="Tower/Scene/TowerSprites"]
use_parent_material = true
position = Vector2(0, -60)
texture = SubResource("ViewportTexture_gbuvm")

[node name="TowerSprite3" type="Sprite2D" parent="Tower/Scene/TowerSprites"]
use_parent_material = true
position = Vector2(0, -180)
texture = SubResource("ViewportTexture_gbuvm")

[node name="Tower1" type="Node2D" parent="Tower"]
use_parent_material = true
position = Vector2(-22, 0)

[node name="TileMapLayer" type="TileMapLayer" parent="Tower/Tower1"]
use_parent_material = true
tile_map_data = PackedByteArray("AAACABcAAAAAAAAAAAABABcAAAAAAAAAAAAAABcAAAAAAAAAAAD9/xcAAAAAAAAAAAD+/xcAAAAAAAAAAAD//xcAAAAAAAAAAAABABYAAAAAAAAAAAAAABMAAAAAAAAAAAD//w8AAAAAAAAAAAD+/woAAAAAAAAAAAABAAkAAAAAAAAAAAD9/wMAAAAAAAAAAAD+/wMAAAAAAAAAAAD//wMAAAAAAAAAAAAAAAMAAAAAAAAAAAABAAMAAAAAAAAAAAACAAMAAAAAAAAAAAD9//H/AAAAAAAAAAD+//L/AAAAAAAAAAD///P/AAAAAAAAAAAAAPT/AAAAAAAAAAABAPX/AAAAAAAAAAACAPb/AAAAAAAAAAD9//r/AAAAAAAAAAD+//r/AAAAAAAAAAD///r/AAAAAAAAAAAAAPr/AAAAAAAAAAABAPr/AAAAAAAAAAACAPr/AAAAAAAAAAD9/wAAAAAAAAAAAAD+/wEAAAAAAAAAAAD//wIAAAAAAAAAAAD9/wEAAAAAAAAAAAD9/wIAAAAAAAAAAAD+/wIAAAAAAAAAAAABAPH/AQAAAAAAAAACAPH/AQAAAAAAAAD+//H/AQAAAAAAAAD///H/AQAAAAAAAAAAAPH/AQAAAAAAAAA=")
tile_set = ExtResource("7_orpcr")

[node name="Enemies" type="Node2D" parent="Tower/Tower1"]
use_parent_material = true

[node name="wheel" parent="Tower/Tower1/Enemies" instance=ExtResource("6_shiux")]
position = Vector2(17, 15)

[node name="Tower2" type="Node2D" parent="Tower"]
use_parent_material = true
position = Vector2(44, 0)

[node name="TileMapLayer2" type="TileMapLayer" parent="Tower/Tower2"]
use_parent_material = true
tile_map_data = PackedByteArray("AAD9/xcAAAAAAAAAAAD+/xcAAAAAAAAAAAD//xcAAAAAAAAAAAAAABcAAAAAAAAAAAABABcAAAAAAAAAAAACABcAAAAAAAAAAAD9/xMAAAAAAAAAAAD9/xQAAAAAAAAAAAD9/xUAAAAAAAAAAAD9/xYAAAAAAAAAAAD9/xAAAAAAAAAAAAD9/xEAAAAAAAAAAAD9/xIAAAAAAAAAAAD+/xAAAAAAAAAAAAD//xAAAAAAAAAAAAAAABAAAAAAAAAAAAABABAAAAAAAAAAAAABABEAAAAAAAAAAAABABIAAAAAAAAAAAABABMAAAAAAAAAAAACABMAAAAAAAAAAAD9/w8AAAAAAAAAAAD//w0AAAAAAAAAAAD9/woAAAAAAAAAAAD9/wkAAAAAAAAAAAD+/wkAAAAAAAAAAAD//wkAAAAAAAAAAAAAAAkAAAAAAAAAAAABAAkAAAAAAAAAAAACAAkAAAAAAAAAAAD9/wMAAAAAAAAAAAD+/wMAAAAAAAAAAAD//wMAAAAAAAAAAAAAAAMAAAAAAAAAAAABAAMAAAAAAAAAAAACAAMAAAAAAAAAAAAAAPr/AAAAAAAAAAD+//j/AAAAAAAAAAD9//f/AAAAAAAAAAD9//r/AAAAAAAAAAD+//r/AAAAAAAAAAD///r/AAAAAAAAAAABAPr/AAAAAAAAAAACAPr/AAAAAAAAAAACAAIAAAAAAAAAAAD9/wIAAAAAAAAAAAD9//H/AAAAAAAAAAD+//H/AAAAAAAAAAD///H/AAAAAAAAAAAAAPH/AAAAAAAAAAABAPH/AAAAAAAAAAACAPH/AAAAAAAAAAA=")
tile_set = ExtResource("7_orpcr")

[node name="Enemies" type="Node2D" parent="Tower/Tower2"]
use_parent_material = true

[node name="wheel" parent="Tower/Tower2/Enemies" instance=ExtResource("6_shiux")]
position = Vector2(-16, 80)

[node name="wheel2" parent="Tower/Tower2/Enemies" instance=ExtResource("6_shiux")]
position = Vector2(16, 15)

[node name="wheel4" parent="Tower/Tower2/Enemies" instance=ExtResource("6_shiux")]
position = Vector2(5, -30)

[node name="Tower3" type="Node2D" parent="Tower"]
use_parent_material = true
position = Vector2(110, 0)

[node name="TileMapLayer3" type="TileMapLayer" parent="Tower/Tower3"]
use_parent_material = true
tile_map_data = PackedByteArray("AAD9/wMAAAAAAAAAAAD9/wQAAAAAAAAAAAD9/wUAAAAAAAAAAAD9/wkAAAAAAAAAAAD9/woAAAAAAAAAAAD9/wsAAAAAAAAAAAD9/wwAAAAAAAAAAAD9/w0AAAAAAAAAAAD9/w4AAAAAAAAAAAD9/w8AAAAAAAAAAAD9/xAAAAAAAAAAAAD9/xEAAAAAAAAAAAD9/xMAAAAAAAAAAAD9/xcAAAAAAAAAAAD+/wkAAAAAAAAAAAD+/xMAAAAAAAAAAAD+/xcAAAAAAAAAAAD//xcAAAAAAAAAAAAAABcAAAAAAAAAAAABAA8AAAAAAAAAAAABABUAAAAAAAAAAAABABcAAAAAAAAAAAACAAMAAAAAAAAAAAACAAQAAAAAAAAAAAACAAUAAAAAAAAAAAACAAYAAAAAAAAAAAACAAcAAAAAAAAAAAACAAgAAAAAAAAAAAACAAkAAAAAAAAAAAACAAoAAAAAAAAAAAACAAsAAAAAAAAAAAACAAwAAAAAAAAAAAACAA0AAAAAAAAAAAACAA4AAAAAAAAAAAACAA8AAAAAAAAAAAACABAAAAAAAAAAAAACABEAAAAAAAAAAAACABIAAAAAAAAAAAACABMAAAAAAAAAAAACABQAAAAAAAAAAAACABUAAAAAAAAAAAACABcAAAAAAAAAAAACAAIAAAAAAAAAAAD+/wQAAAAAAAAAAAACAAAAAAAAAAAAAAACAAEAAAAAAAAAAAABAP//AAAAAAAAAAAAAP7/AAAAAAAAAAD///3/AAAAAAAAAAD+//z/AAAAAAAAAAD9//v/AAAAAAAAAAD9//H/AAAAAAAAAAD+//H/AAAAAAAAAAD///H/AAAAAAAAAAAAAPH/AAAAAAAAAAABAPH/AAAAAAAAAAACAPH/AAAAAAAAAAA=")
tile_set = ExtResource("7_orpcr")

[node name="TowerOut" type="Node2D" parent="Tower"]
position = Vector2(44, 0)

[node name="slime" parent="." instance=ExtResource("1_lkb1x")]
position = Vector2(38, 110)

[node name="Camera2D2" type="Camera2D" parent="slime"]
material = SubResource("ShaderMaterial_kmh7i")
position = Vector2(0, -20)
limit_bottom = 120
position_smoothing_speed = 100.0
drag_vertical_enabled = true
drag_top_margin = 0.3
drag_bottom_margin = 0.4
editor_draw_screen = false

[node name="StaticBody2D" parent="." instance=ExtResource("14_1gjkc")]
position = Vector2(27, -82)
